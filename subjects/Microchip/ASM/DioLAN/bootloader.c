// bootloader.c
// Generated by decompiling bootloader.hex
// using Reko decompiler version 0.8.0.0.

#include "bootloader.h"

// 00000000: void fn00000000(Register byte PORTE, Register byte LATE, Register byte TRISE, Register byte EEDATA, Register (ptr Eq_6) BSR)
void fn00000000(byte PORTE, byte LATE, byte TRISE, byte EEDATA, Eq_6 * BSR)
{
	STKPTR = fp;
	TBLPTRU = 0x00;
	TBLPTRH = 0x00;
	Z = true;
	WREG = 0x0F;
	ADCON1 = 0x0F;
	WREG = 0x00;
	EEADR = 0x00;
	WREG = 0x01;
	EECON1 = 0x01;
	WREG = 0x5A;
	WREG = EEDATA - 0x5A;
	CDCZOVN = cond(WREG);
	Z = CDCZOVN;
	if (Test(EQ,Z))
	{
		TRISE = TRISE & ~0x01;
		LATE = LATE & ~0x01;
		BSR->b0014 = 0x00;
		Z = true;
		STKPTR = (word16) fp.u1 + 0x01;
		Stack[(word16) fp.u1 + 0x01].ptr0000 = 0x0522;
		TOS = 0x0522;
		fn00021A(BSR);
	}
	else
	{
		TRISE = ~0x00;
		if ((PORTE & 0x01) != 0x00)
		{
			while (true)
				;
		}
	}
}

// 0000021A: void fn00021A(Register (ptr Eq_6) BSR)
void fn00021A(Eq_6 * BSR)
{
	do
		;
	while (0x00 != 0x00);
	BSR->b0017 = 0x02;
}

