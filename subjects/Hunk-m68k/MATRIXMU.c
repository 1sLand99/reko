// MATRIXMU.c
// Generated by decompiling MATRIXMU
// using Decompiler version 0.5.5.0.

#include "MATRIXMU.h"

void fn00001000(word32 d0, word32 a0)
{
	word32 a6_8 = Mem0[0x00000004 + 0x00:word32];
	word32 d2_3 = d0;
	word32 a2_241 = a0;
	word32 a4_6 = 0x0000948A;
	if (Mem0[a6_8 + 0x0014:word16] - 0x24 <u 0x00)
	{
		word32 a0_495 = 0x00001494;
		word32 d0_498 = 0x0C;
		do
		{
			Mem502[a0_495 + 0x00:word32] = 0x00;
			a0_495 = a0_495 + 0x04;
			d0_498 = d0_498 - 0x01;
		} while (d0_498 != 0x00);
	}
	Mem14[a4_6 + -0x00007FF6:word32] = fp;
	Mem16[a4_6 + -0x00007FF2:word32] = a6_8;
	word32 d0_19 = FindTask(0x00);
	word32 d0_110 = OpenLibrary(0x000012BC, 0x00);
	if (d0_110 != 0x00)
	{
		word32 d4_450;
		Mem84[a4_6 + -0x00007FEE:word32] = d0_110;
		if (Mem84[d0_19 + 0x00AC:word32] == 0x00)
		{
			d4_450 = 0x02;
			d2_3 = 0x08;
		}
		else
		{
			word32 a0_453 = a0;
			d4_450 = 0x03;
			do
			{
				if (Mem84[a0_507 + 0x00:byte] - 0x20 == 0x00)
					d4_450 = DPB(d4_450, (word16) d4_450 + 0x01, 0);
				a0_453 = a0_507 + 0x01;
				word32 a0_507 = a0_453;
			} while (Mem84[a0_507 + 0x00:byte] != 0x00);
		}
		word32 d0_103 = d4_450 << 0x02;
		word32 d0_105 = d0_103 + d2_3;
		word32 d1_109 = 0x00010001;
		d0_110 = AllocMem(d0_105 + 0x11, 0x00010001);
		if (d0_110 != 0x00)
		{
			word32 dwLoc14_156;
			word32 a0_161;
			Mem120[d0_110 + 0x00:word32] = d0_105 + 0x11;
			word32 d4_121 = d4_450 - 0x01;
			Mem123[d0_110 + 0x0C:word32] = d4_121;
			Mem127[d0_110 + 0x08:word32] = d0_110 + 0x0010 + d0_103;
			Mem129[0x00:word32] = 0x00;
			word32 d0_130 = Mem129[d0_19 + 0x00AC:word32];
			Mem138[d0_130 + 0x00:word32] = d0_105 + 0x11;
			Mem142[d0_130 + 0x0C:word32] = d4_121 - 0x01;
			Mem146[d0_130 + 0x08:word32] = d0_130 + 0x0010 + d0_103;
			Mem148[0x00:word32] = 0x00;
			word32 d0_149 = Mem148[d0_19 + 0x00AC:word32];
			if (d0_149 == 0x00)
			{
				fn00001214(d0_19);
				Mem387[a4_6 + -0x00007FEA:word32] = d0_149;
				Mem389[a4_6 + -32742:word32] = d0_149;
				Mem394[0x00:word32] = 0x00;
				dwLoc14_156 = d0_149;
				word32 d0_397 = Mem394[d0_149 + 0x0024:word32];
				if (d0_397 != 0x00)
					Enable();
				Supervisor(d0_130);
				Mem404[d0_130 + 0x04:word32] = d0_397;
				if (d0_397 == 0x00)
				{
					fn0000127C(0x0014);
					return;
				}
				Mem410[a4_6 + -32738:word32] = d0_397;
				Mem412[a4_6 + -32734:word32] = d0_397;
				Mem414[a4_6 + -32730:word32] = d0_397;
				Mem416[d0_19 + 0x009C:word32] = d0_397;
				Mem418[d0_19 + 0x00A0:word32] = d0_397;
				word32 d0_422 = 0x08[d0_397 * 0x04];
				if (d0_422 != 0x00)
					Mem428[d0_19 + 0x00A4:word32] = d0_422;
l000011F8:
				a0_161 = Mem148[d0_19 + 0x003A:word32];
				goto l00001202;
			}
			word32 d0_198 = 0x0010[d0_149 * 0x04];
			word32 a0_205 = (d0_198 << 0x02) + 0x01;
			word32 d0_206 = (int32) 0x00[d0_198 * 0x04];
			Mem207[a0_205 + d0_206:byte] = 0x00;
			Mem209[d0_130 + 0x0010:word32] = a0_205;
			word32 d0_213 = 0x0010[d0_206 * 0x04];
			word32 a1_216 = Mem209[d0_130 + 0x08:word32];
			word32 a0_221 = (d0_213 << 0x02) + 0x01;
			word32 d0_222 = (int32) 0x00[d0_213 * 0x04];
			Mem223[a0_221 + d0_222:byte] = 0x00;
			Mem225[d0_130 + 0x0010:word32] = a0_221;
			word32 a6_226 = d0_130 + 0x14;
			word32 d3_227 = 0x01;
			word32 a0_229 = a0 + d2_3;
			do
				a0_229 = a0_229 - 0x01;
			while (d2_3 != ~0x00);
			Mem235[a0_229 + 0x01:byte] = 0x00;
			word32 d2_234 = d2_3 - 0x01;
			do
			{
l000010E6:
				byte v37_250 = Mem235[a2_241 + 0x00:byte];
				a2_241 = a2_241 + 0x01;
				d1_109 = DPB(d1_109, v37_250, 0);
				if (v37_250 == 0x00)
					goto l00001148;
			} while ((byte) d1_109 - 0x20 == 0x00 || (byte) d1_109 - 0x09 == 0x00);
			if (d3_227 - Mem235[d0_130 + 0x0C:word32] != 0x00)
			{
				Mem306[a6_226 + 0x00:word32] = a1_216;
				a6_226 = a6_226 + 0x04;
				d3_227 = DPB(d3_227, (word16) d3_227 + 0x01, 0);
				if ((byte) d1_109 - 0x22 != 0x00)
				{
					Mem326[a1_216 + 0x00:byte] = (byte) d1_109;
					a1_216 = a1_216 + 0x01;
					while (true)
					{
						byte v45_332 = Mem326[a2_241 + 0x00:byte];
						a2_241 = a2_241 + 0x01;
						d1_109 = DPB(d1_109, v45_332, 0);
						if (v45_332 == 0x00)
							break;
						if ((byte) d1_109 - 0x20 == 0x00)
							goto l00001116;
						Mem341[a1_216 + 0x00:byte] = (byte) d1_109;
						a1_216 = a1_216 + 0x01;
					}
				}
				else
					while (true)
					{
						byte v70_348 = Mem306[a2_241 + 0x00:byte];
						a2_241 = a2_241 + 0x01;
						d1_109 = DPB(d1_109, v70_348, 0);
						if (v70_348 == 0x00)
							break;
						if ((byte) d1_109 - 0x22 == 0x00)
						{
l00001116:
							Mem319[a1_216 + 0x00:byte] = 0x00;
							a1_216 = a1_216 + 0x01;
							goto l000010E6;
						}
						if ((byte) d1_109 - 0x2A == 0x00)
						{
							d1_109 = DPB(d1_109, Mem306[a2_241 + 0x00:byte], 0);
							d2_234 = DPB(d2_234, (byte) DPB(d2_234, (byte) d1_109, 0) & 223, 0);
							a2_241 = a2_241 + 0x01;
							if ((byte) d2_234 - 0x4E == 0x00)
								d1_109 = 0x0A;
							else if ((byte) d2_234 - 0x45 == 0x00)
								d1_109 = 0x001B;
						}
						Mem364[a1_216 + 0x00:byte] = (byte) d1_109;
						a1_216 = a1_216 + 0x01;
					}
			}
l00001148:
			Mem263[a1_216 + 0x00:byte] = 0x00;
			Mem264[a6_226 + 0x00:word32] = 0x00;
			execPrivate4();
			Mem272[a4_6 + -32738:word32] = d0_222;
			execPrivate5();
			Mem274[a4_6 + -32734:word32] = d0_222;
			dwLoc14_156 = d0_130 + 0x0010;
			dwLoc18 = d3_227;
			if (Mem274[Mem274[a4_6 + -0x00007FF2:word32] + 0x0014:word16] - 0x24 >=u 0x00)
			{
				word32 v87_292 = Mem274[d0_19 + 224:word32];
				Mem293[a4_6 + -32730:word32] = v87_292;
				if (v87_292 != 0x00)
				{
l0000117E:
					if (Mem274[d0_19 + 0x08:byte] - 0x0D == 0x00)
					{
						word32 a0_282 = Mem274[d0_19 + 0x00B0:word32];
						a0_161 = a0_282 + 0x04 - Mem274[a0_282 + 0x00:word32];
l00001202:
						Mem169[a4_6 + -0x00007FCE:word32] = a0_161;
						Mem171[a4_6 + -0x00007FCA:word32] = fp - 0x18;
						fn00001354(dwLoc18, dwLoc14_156);
						fn0000127C(0x00);
						return;
					}
					goto l000011F8;
				}
			}
			Mem290[a4_6 + -32730:word32] = d0_222;
			goto l0000117E;
		}
		CloseLibrary(Mem84[a4_6 + -0x00007FEE:word32]);
		Alert(0x00010000);
	}
	else
		Alert(0x00038007);
	if (Mem16[d0_19 + 0x00AC:word32] == 0x00)
	{
		fn00001214(d0_19);
		fn0000126C(d0_110);
	}
	return;
}

void fn00001214(word32 a3)
{
	WaitPort(a3 + 0x005C);
	GetMsg(a3 + 0x005C);
	return;
}

void fn0000126C(word32 a2)
{
	Forbid();
	ReplyMsg(a2);
	return;
}

void fn00001278(word32 dwArg04)
{
	fn0000127C(dwArg04);
	return;
}

void fn0000127C(word32 d2)
{
	word32 a4_0 = 0x0000948A;
	word32 a7_3 = Mem0[a4_0 + -0x00007FF6:word32];
	word32 v7_8 = Mem0[a7_3 - 0x04 + 0x00:word32];
	word32 v5_5 = Mem0[a7_3 - 0x08 + 0x00:word32];
	if (Mem0[v7_8 + 0x04:word32] != 0x00)
		execPrivate1();
	CloseLibrary(Mem0[a4_0 + -0x00007FEE:word32]);
	if (v5_5 != 0x00)
		fn0000126C(v5_5);
	FreeMem(v7_8, Mem0[v7_8 + 0x00:word32]);
	return;
}

void fn000012D0(word32 dwArg04)
{
	word32 a3_11 = 0x000014D0;
	if (0x14D0 != 0x00)
	{
		word32 d2_39 = 0x01;
		if (Mem0[a3_11 + 0x04:word32] != 0x00)
			do
				d2_39 = d2_39 + 0x01;
			while (a3_11[d2_39 * 0x04] != 0x00);
		word32 d2_49 = d2_39 - 0x01;
		if (d2_49 != 0x00)
			do
			{
				word32 d0_55 = d2_49 << 0x02;
				word32 a2_57 = Mem0[a3_11 + d0_55:word32];
				word32 a7_59;
				word32 a2_61;
				word32 d2_62;
				word32 d0_63;
				byte CVZN_64;
				byte Z_65;
				byte ZN_66;
				byte C_67;
				byte V_68;
				byte CVZNX_69;
				a2_57();
				d2_49 = d2_62 - 0x01;
			} while (d2_62 != 0x01);
	}
	fn00001278(dwArg04);
	return;
}

void fn0000131C(word32 dwArg04)
{
	if (Mem0[0x000014C4 + 0x00:word32] == 0x00)
	{
		word32 a3_28 = Mem0[0x000014D8 + 0x00:word32];
		Mem31[0x000014C4 + 0x00:word32] = 0x01;
		if (a3_28 != 0x00)
			do
			{
				word32 a2_50 = Mem31[a3_28 + 0x04:word32];
				word32 a7_51;
				word32 a3_52;
				word32 a2_53;
				byte ZN_54;
				byte C_55;
				byte V_56;
				byte Z_57;
				word32 d0_58;
				byte CVZN_59;
				a2_50();
				a3_28 = Mem31[a3_52 + 0x00:word32];
			} while (a3_28 != 0x00);
		fn000012D0(dwArg04);
	}
	return;
}

void fn00001354(word32 dwArg04, word32 dwArg08)
{
	word32 a3_45 = 0x000014CC;
	if (0x14C8 != 0x00 && Mem0[a3_45 + 0x00:word32] != 0x00)
		do
		{
			word32 a7_52;
			word32 a2_54;
			word32 d0_55;
			byte CVZN_56;
			byte Z_57;
			byte ZN_58;
			byte C_59;
			byte V_60;
			Mem0[a3_45 + 0x00:word32]();
		} while (Mem0[a3_45 + 0x00:word32] != 0x00);
	fn00001468();
	fn0000131C(0x05);
	return;
}

void fn00001390(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	word32 d4_32 = 0x00;
	while (0x05 - d4_32 > 0x00)
	{
		word32 d3_67 = 0x00;
		while (0x04 - d3_67 > 0x00)
		{
			word32 d2_171 = 0x00;
			while (0x04 - d2_171 > 0x00)
			{
				word32 d1_109 = __swap(0x0014) *u (word16) d2_171;
				word32 a1_120 = dwArg08 + ((word16) d2_171 *u 0x0014 + DPB(__swap(DPB(d1_109, (word16) d1_109 + (word16) (__swap(d2_171) *u 0x14), 0)), 0x00, 0)) + (d3_67 << 0x02);
				word32 d0_122 = (dwArg04 + (d4_32 << 0x04))[d2_171 * 0x04];
				word32 d1_123 = Mem0[a1_120 + 0x00:word32];
				word32 d5_128 = __swap(d0_122) *u (word16) d1_123;
				word32 d0_135 = d0_122 *u (word16) d1_123 + DPB(__swap(DPB(d5_128, (word16) d5_128 + (word16) (__swap(d1_123) *u (word16) d0_122), 0)), 0x00, 0);
				word32 d5_141 = __swap(0x0014) *u (word16) d4_32;
				word32 d0_152 = d0_135 + (dwArg0C + ((word16) d4_32 *u 0x0014 + DPB(__swap(DPB(d5_141, (word16) d5_141 + (word16) (__swap(d4_32) *u 0x14), 0)), 0x00, 0)))[d3_67 * 0x04];
				word32 d5_158 = __swap(0x0014) *u (word16) d4_32;
				(dwArg0C + ((word16) d4_32 *u 0x0014 + DPB(__swap(DPB(d5_158, (word16) d5_158 + (word16) (__swap(d4_32) *u 0x14), 0)), 0x00, 0)))[d3_67 * 0x04] = d0_152;
				d2_171 = d2_171 + 0x01;
			}
			d3_67 = d3_67 + 0x01;
		}
		d4_32 = d4_32 + 0x01;
	}
	return;
}

void fn00001468()
{
	fn00001390(fp + ~0xEF, fp + ~0x9F, fp + -0x0050);
	return;
}

